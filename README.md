# 魚群模擬

這是一個使用 p5.js 開發的 300 條小魚群游泳模擬程式。模擬中，魚群將表現出自然的群體行為，並且會避免與水族箱（視窗）的牆壁碰撞。

## 運行方式

1. 在瀏覽器中打開 `index.html` 文件
2. 您將看到一個藍色背景的水族箱，內有 300 條彩色小魚
3. 點擊滑鼠，可在點擊處產生波浪效果並吸引附近的魚群

## 互動功能

- **滑鼠點擊**：在點擊位置產生連續循環的波浪效果，持續 30 秒，並吸引附近的魚群向此位置游動
- 波浪效果包含多個不同大小和顏色的同心圓，不斷從中心擴散出去
- 當波浪圈圈擴散到最大半徑時，會重置回內側，形成連續循環的效果
- 同時最多只能有 3 個波浪源點存在，若創建新的點擊點，最早的會被移除
- 波浪效果的持續時間、圈數、最大數量都可以通過程式碼中的常數輕鬆調整

## 模擬原理

這個模擬基於 Craig Reynolds 的 Boids 演算法，實現了三個主要行為規則：

1. **分離（Separation）**：魚會避免與其他魚太近，防止擁擠
2. **對齊（Alignment）**：魚會嘗試與附近的魚保持相同的移動方向
3. **凝聚（Cohesion）**：魚會朝著附近魚群的中心位置移動

此外，還增加了避開牆壁的行為，確保魚不會游出水族箱，以及對滑鼠點擊波浪的吸引行為。

## 參數調整

如果您想要調整模擬效果，可以修改 `sketch.js` 文件中的以下參數：

- `FISH_COUNT`：魚的數量（預設 300）
- `MAX_SPEED`：魚的最大游泳速度
- `SEPARATION_DISTANCE`、`ALIGNMENT_DISTANCE`、`COHESION_DISTANCE`：感知範圍
- `SEPARATION_WEIGHT`、`ALIGNMENT_WEIGHT`、`COHESION_WEIGHT`：行為權重
- `MARGIN`：魚開始避開牆壁的邊界距離
- `WAVE_DURATION`：波浪效果的持續時間（秒）
- `WAVE_ATTRACTION_WEIGHT`：波浪吸引力強度
- `MAX_WAVE_RADIUS`：波浪最大半徑
- `MIN_WAVE_RADIUS`：波浪最小半徑
- `WAVE_SPEED`：波浪擴散速度
- `MAX_WAVE_COUNT`：同時存在的最大波浪數量
- `WAVE_CIRCLES_COUNT`：每個波浪源的圈圈數量

## 技術說明

- 使用 p5.js 向量運算處理魚的移動和力量
- 每條魚繪製為簡單的三角形魚身和尾巴
- 使用 HSB 顏色模式創建多彩鮮豔的魚群
- 使用粒子系統概念實現循環波浪效果
- 波浪吸引力根據距離遞減
- 隊列管理技術控制最大波浪源數量

這個模擬適合用於教育目的，了解群體行為的基本原理和互動式動畫效果。 